<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>iMovies</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='css/style.css'>
    <link rel="icon" type="image/x-icon" href="img/favicon.png">
    <link href="https://fonts.cdnfonts.com/css/pokemon-solid" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Sansita:ital,wght@0,400;0,700;0,800;0,900;1,400;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src='js/index.js'></script>
</head>

<body>

  <h1>Buscador de Películas OMDb</h1>

  <div class="search-box">
    <label for="title">Título:</label>
    <input type="text" id="title" placeholder="Ej: Inception"><br>

    <label for="year">Año:</label>
    <input type="text" id="year" placeholder="Ej: 2010"><br>

    <label for="type">Tipo:</label>
    <select id="type">
      <option value="">Todos</option>
      <option value="movie">Película</option>
      <option value="series">Serie</option>
      <option value="episode">Episodio</option>
    </select><br>

    <button id="searchBtn">Buscar</button>
  </div>

  <div id="movies-info"></div>

  <script>
    const apiKey = "4526760c"; // Reemplaza esto con tu clave de API de OMDb

    $('#searchBtn').click(function () {
      const title = $('#title').val().trim();
      const year = $('#year').val().trim();
      const type = $('#type').val();
      const plot = $('#plot').val();

      if (title === "") {
        alert("Por favor ingresa un título.");
        return;
      }

      let url = `https://www.omdbapi.com/?apikey=${apiKey}&s=${encodeURIComponent(title)}`;

      if (year !== "") {
        url += `&y=${year}`;
      }

      if (type !== "") {
        url += `&type=${type}`;
      }

      $.ajax({
        url: url,
        method: 'GET',
        success: function (info) {
          $('#movies-info').empty();

          if (info.Response === "True") {
            info.Search.forEach(function (data) {
              const poster = data.Poster !== "N/A" ? data.Poster : "https://via.placeholder.com/120x180";
              $('#movies-info').append(`
                <div class="movie-card">
                  <img src="${poster}" alt="${data.Title}">
                  <div>
                    <h2>${data.Title} (${data.Year})</h2>
                    <p><strong>Tipo:</strong> ${data.Actors}</p>
                    <p><strong>Tipo:</strong> ${data.Type}</p>
                    <p><strong>IMDb ID:</strong> ${data.imdbID}</p>
                  </div>
                  <div style="clear: both;"></div>
                </div>
              `);
            });
          } else {
            $('#movies-info').html(`<p>No se encontraron resultados para "${title}".</p>`);
          }
        },
        error: function () {
          $('#movies-info').html('<p>Ocurrió un error al consultar la API.</p>');
        }
      });
    });
  </script>

</body>
</html>
